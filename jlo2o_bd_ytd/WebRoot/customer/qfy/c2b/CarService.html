<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>汽服云 - 需求发布</title>
<!-- 列表页  第二版 -->
<link rel="stylesheet" type="text/css" href="../css/products_2.css" />
<link rel="stylesheet" type="text/css" href="../css/member_shop_2.css" />
<link rel="stylesheet" type="text/css" href="/css/edlg.css" />
<link rel="stylesheet" type="text/css" href="../css/carSs_2.css" />
<link rel="stylesheet" type="text/css" href="/control/css/splist_1.css" />
<link rel="stylesheet" type="text/css" href="/css/kkPages.css" />
<!-- <link rel="stylesheet" type="text/css" href="http://api.amap.com/Public/css/demo.Default.css" /> -->
<style type="text/css">
	body, h1, h2, h3, h4, h5, h6, hr, p, blockquote, dl, dt, dd, ul, ol, li, pre, form, fieldset, legend, button, input, textarea, th, td {
  margin: 0;
  padding: 0; }

body, button, input, select, textarea {
  font: 12px/1.5 Microsoft YaHei,arial,"\5b8b\4f53";
  *line-height: 1.5;
  -ms-overflow-style: scrollbar; }

h1, h2, h3, h4, h5, h6 {
  font-size: 100%; }

address, cite, dfn, em, var {
  font-style: normal; }

code, kbd, pre, samp {
  font-family: courier new,courier,monospace; }

small {
  font-size: 12px; }

ul, ol {
  list-style: none; }

a {
  text-decoration: none;
  color: #000; }

a:hover {
  text-decoration: none; }

a:visited {
  color: #000; }

sup {
  vertical-align: text-top; }

sub {
  vertical-align: text-bottom; }

legend {
  color: #000; }

fieldset, img {
  border: 0; }

button, input, select, textarea {
  font-size: 100%; }

table {
  border-collapse: collapse;
  border-spacing: 0; }
  
.wrap{
	width:1150px;
	margin:0 auto;
}
.nav{
	    border-bottom: 1px solid #000;
  position: relative;
  padding-top: 20px;
  height: 32px;
}
.nav h2{
	  font-size: 20px;
  width: 120px;
  border-bottom: 3px solid #ff4a00;
  position: absolute;
  bottom: -1px;
  padding-left: 20px;
}
.nav-menu{
	  height: 50px;
  padding-top: 20px;
    padding-left: 40px;
}
ul.nav-menu-list{
	height: 44px;
}
ul.nav-menu-list>li {
    float: left;
  width: 120px;
  height: 42px;
  line-height: 42px;
  font-size: 18px;
  font-weight: bold;
  cursor: pointer;
  background-color: #e5e5e5;
  text-align: center;
  margin-right: 20px;
  border: 1px solid #e5e5e5;
}
ul.nav-menu-list>li:hover{
	color:#ff4a00;
	border-color:#ff4a00;
}
ul.nav-menu-list>li.spacer{
	  line-height: 28px;
  color: #ddd;
  font-size: 16px;
    width: 18px;
}
ul.nav-menu-list>li.navlive{
	color:#ff4a00;
	border-color:#ff4a00;
}
.content{
	  width: 900px;
	    height: 700px;
  margin: 0 auto;
  clear: both;
  position:relative;
}
.row {
  
  height: 38px;
    position: relative;
        padding: 10px 0 10px 110px;
}
.label{
	    position: absolute;
  left: 0;
  width: 100px;
  padding-top: 6px;
  font-size: 14px;
  text-align: right;
  color: #333;
}
.row>.text{
	  width: 379px;
  height: 24px;
  padding: 5px;
  border: 1px solid #aaa;
  line-height: 24px;
  vertical-align: top;
}
.select {
   
	  border: 1px solid #e4e4e4;
  height: 36px;
  line-height: 36px;
  padding: 6px;
  width: 128px;
}
#submit{
  cursor:pointer;
	  width: 100px;
  height: 32px;
  background-color: #ff6700;
  border: 0;
  outline: 0;
  color: white;
}
.radio-span{
	display: inline-block;
    height: 34px;
  width: 80px;
  line-height: 34px;
}
.radio-span input{
	  margin-top: -2px;
  vertical-align: middle;
  cursor:pointer;
}
.radio-span label{
	margin-left: 6px;
  cursor:pointer;
}
#iCenter{
	      position: absolute;
  width: 470px;
  height: 470px;
  top: 144px;
  right: -100px;
}
.xzcx{
	cursor:pointer;
    margin-top: 8px;
    text-align: center;
    padding: 9px;
    color: #fff;
    border: 1px solid #ff6700;
    border-radius: 5px;
    font-size: 12px;
    width: 60px;
    height: 20px;
    line-height: 35px;
    background-color: #ff6700;
}

.xg{
	cursor:pointer;
    margin-top: 2px;
    text-align: center;
    padding: 9px;
    color: #fff;
    border: 1px solid #ff6700;
    border-radius: 5px;
    font-size: 15px;
    width: 50px;
    height: 15px;
    line-height: 35px;
    background-color: #ff6700;
    display:inline-block;
    line-height:15px;
}
 
</style>
</head>
<body>  
<div id="header"></div>
<div class="wrap">
	<div class="nav">
		<h2>发布需求</h2>
	</div>
	<div class="content">
		<div class="nav-menu">
			<ul class="nav-menu-list" id="nav">
			</ul>
		</div>
		<form id="form0" action="" method="post">
			<div class="row" id="details">
				<label class="label">需求类型: </label>
				<span class="radio-span">
					<input name="ServiceTypeID" id="ServiceTypeID_2" type="radio" value="2" /><label for="ServiceTypeID_2">大保养</label>
				</span><span class="radio-span">
					<input name="ServiceTypeID" id="ServiceTypeID_3" type="radio" value="3" /><label for="ServiceTypeID_3">小保养</label>
				</span>
			</div>
			<input type="hidden" name="userId" id="userId" />
			
			<div class="row"> 
				<label class="label">现场图片: </label>
    			<input type="file" class="text" id="tx" name="carPic" accept=".png,.JPEG,.GIF,.SVG,.PNG,.BMP,.jpg"  value="" style="  margin-top: 6px;"/>
			</div>
			<div class="row">
				<label class="label">有效时间: </label>
				<input class="text" type="text" id="wxsj" name="InvalidTime" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" placeholder="希望多久解决您的问题                                                   单位/小时" />
			</div>
			<div class="row">
				<label class="label">期望价格: </label><input class="text" type="text" id="bj" name="QuotedPrice" onkeyup="this.value=this.value.replace(/\D/g,'')" onafterpaste="this.value=this.value.replace(/\D/g,'')" placeholder="金额/元" />
			</div>
			<div class="row" style="  height: 90px;">
				<label class="label">地址: </label>
				<select name="QYdz01" id="provinceQY" class="select">
					<option value="0">请选择</option>
				</select> 
				<select name="QYdz02" id="cityQY" class="select">
					<option value="0">请选择</option>
				</select>
				<select name="QYdz03" id="countryQY" class="select">
					<option value="0">请选择</option>
				</select>
				<br />
				<input style="margin-top: 6px;" class="text" type="text" class="text" id="QYdzdetail" name="dz" value="" placeholder="输入您的详细地址" onblur="javascript:searchByBtn();" /> 
				<input type="hidden" name="PublishAddress" id="xxdz" />
				<input type="hidden" name="lngt" id="lng" />
				<input type="hidden" name="lntt" id="lnt" />
			</div>
			<div class="row" id="carNum">
				<label class="label" style="padding:0;">车牌号码: </label>
				<input type="text" value=""   class="text" id="carNo" name="CarId" onclick="changeCarNo()"/>
			</div>
			<div class="row" >
				<label class="label" style="padding:0;">车型品牌: </label>
    			<input type="text" class="text" id="pp" placeholder="可输入车型品牌,也可选择" title="" name="CarBrand" value="" onclick="show_flpp()"/>
    			<div id="FLPP_ZZ"></div>
			    <div id="FLPP_ZZ_1">
					<div id="container">
						<div class="title_zz">
						  <b>车型选择</b><a onclick="closeflpp()">关闭</a>
						</div>			
						<div id="sxtj" style="width: 750px;">
						  <a href="#" class="xuan reset_cx" >按首字母查找</a>
						</div>			
						<div id="sxtjxx" class="sxtjxx">
						  <div class="xxtitle" style="margin-left:20px;">
						      <a href="#">全部：</a>
							  <div id="CarOne">
							  </div>
						  </div>			  
						</div>
						<div id="yxz">			   
						</div>
						<div id="member_list">
						   <div id="cxpp_list" ></div>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row" style="height:110px;">
				<label class="label" style="padding:0;">需求描述: </label>
				<textarea id="xqms" name="DemandDescription" cols="62" rows="6" placeholder="输入您的需求详情"></textarea>
			</div>
			<div class="row">
				<input type="button"  id="submit" onclick="suclick()" value="发布" />
			</div>
		</form>
	</div>
</div>
<div id="footer"></div>
<script type="text/javascript" src="/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="/js/jquery.cookie.js"></script>
<script type="text/javascript" src="/control/js/o2o.js"></script>
<script type="text/javascript" src="/js/json2.js"></script>
<script type="text/javascript" src="/js/ajaxfileupload.js"></script>
<script type="text/javascript" src="/js/commons.js"></script>
<script language="javascript"  src="http://webapi.amap.com/maps?v=1.3&key=b2992a19dfcee083c3e8647b38db8420"></script>
<script type="text/javascript" src="/js/amap.js"></script>
<script type="text/javascript">
	
	var MyCookie = $.cookie('userInfo');
	var usercookie = JSON.parse(MyCookie);
	var id = "";
	if(usercookie){
		id = usercookie.Id;
	}
	
	$(document).ready(function() {
		$("#header").load("/customer/qfy/head-08.jsp");
		$("#footer").load("/customer/qfy/foot-08.html?ss="+Math.random());
		initTypeId();
		// id,地图容器
		mapInit("",".content");
		//加载地址信息
		showDQXX("QY");
		//加载车主信息
		carinfo();
		$(".nav-menu-list li").click(function(){
			$(this).siblings("li").removeClass("navlive");
			$(this).addClass("navlive");
		});
	});

	
	//初始地图
	function searchByBtn() {
		$("#iCenter").show();
		var cityCode = document.getElementById("cityQY").value;
		var address = document.getElementById("QYdzdetail").value;
		if (undefined != address && "" != address) {
			//找位置
			searchPostion("022",address,"show");
		}
	};

	//经纬度赋值
	var lng_,lat_,address_;
	function setLngLat(lng,lat,address) {
		lng_ = lng;
		lat_ = lat;
		address_ = address;
		if(address_ != undefined && address_ != ""){
			$("#QYdzdetail").val(address_);
		} else {
			address_ = $("#QYdzdetail").val();
		}
		//var JsonData = {"Longitude":lng,"Latitude":lat,"id":id};
		//url="/CarService/updateLongAndLat.action?JsonData="+JSON.stringify(JsonData); 
		//visitService(url);
	}
	 	
	
	//检查图片大小
	function txdx(){
		 var i = document.getElementById("tx").files[0].size;
		 var limit = 1*1024*1024;
		if(i > limit){
			alert("上传的图片大小要在1M以下");
			return false;
		}else{
			return true;
		}
	}
	
	//检查输入信息
	function checkNull(){
		if($("#wxsj").val().length == 0){
			alert("请输入有效时间!");
			return false;
		}
		if($("#bj").val().length == 0){
			alert("请输入期望价格!");
			return false;
		}
		if(lng_ == "" || lng_ == null){
			alert("请输入精确地址");
			return;
		}
		if($("#xqms").val().length == 0){
			alert("请输入需求描述");
			return false;
		}
		return true;
	}

	function suclick() {
		if(checkNull()){
			var obj = document.getElementById('provinceQY');
			var text1 = obj.options[obj.selectedIndex].text;//获取文本
			var obj = document.getElementById('cityQY');
			var text2 = obj.options[obj.selectedIndex].text;
			var obj = document.getElementById('countryQY');
			var text3 = obj.options[obj.selectedIndex].text;//获取文本
			var text4 = document.getElementById("QYdzdetail").value;
			var PublishAddress = text1 + text2 + text3 + text4;
			$("#xxdz").val(PublishAddress);
			$("#userId").val(id);
			//获取经纬度
			$("#lng").val(lng_);
			$("#lnt").val(lat_);
			var XmlData1 = $("#form0").formToJson();
			var XmlData=escape(JSON.stringify(XmlData1));
			var val="/CarService/insertCarService.action";
			var r = confirm('确认发布信息吗？');
			if(r==true){
				var fileArray=[];
				fileArray.push("tx");
				$.ajaxFileUpload({
					type:"POST",
					secureuri:false,
					fileElementId:fileArray,
					url:encodeURI(val),//encodeURI避免中文乱码
					data:{"jsonData":XmlData},
					dataType:"text",
					success: function(data) { 
						var json = jQuery.parseJSON(data);
						var jsondata = json.data;
						var data1 = jsondata.STATE;
						if(data1 == "1"){
							alert("发布成功!");
							window.location.reload();
						} else {
							alert("发布失败!");
						}
					},
					error: function(XMLHttpRequest, textStatus, errorThrown) {
						alert(textStatus);
				    }
				});
				}
				else return; 
		
		}
	}
	 
	//加载地址信息
	function showDQXX(id) {
		$("#province" + id).parent().children("select").each(function(index){
			if (index == 0) {
				var num = 0;
				var dqjb = 1;
				var dqxx = dqxxList(num, dqjb);
				$(dqxx).each(function(i, dqxxjson) {
					$("#province" + id).append("<option>" + dqxxjson.DQXX02+"</option>");
					$("#province" + id).find("option").eq(i+ 1).val(dqxxjson.DQXX01);
				});
				$(this).bind("change", function(inx) {
					setVal(this, "#city" + id, 2);
				});
			}
			if (index == 1) {
				var dqjb = 2;
				$(this).bind("change", function(inx){
					setVal(this, "#country" + id, 3)
				});
			}
		});
	}

	//展示地址信息
	function dqxxList(num, dqjb) {
		var xmlData = [];
		var json = {};
		json.qydm = num;
		json.dqjb = dqjb;
		xmlData.push(json);
		var url = "/oper_qydz/qryDQ.action?XmlData="+JSON.stringify(xmlData);
		var data = visitService(url);
		return data.mapList;
	}

	//设置地址信息
	function setVal(objnow, objaft, dqjb) {
		var num = $(objnow).find("option:selected").val();
		var list = dqxxList(num, dqjb);
		$(list).each(function(i, json) {
			if (i == 0) {
				$(objaft).empty();
				$(objaft).append("<option value='0'>请选择</option>");
			}
			$(objaft).append("<option>" + json.DQXX02 + "</option>");
			$(objaft).find("option").eq(i + 1).val(json.DQXX01);
		});
	}
	
	

	//服务类型返回
	function initTypeId(){
		
		var url = "/CarService/selectServiceInfo.action";
		var rData = visitService(url);
		$("#nav-menu").html("");
		if (rData != undefined && rData != ""){
			$(rData.ServiceDetails).each(function(index, val) {
				if(index === 0){
					$(".nav-menu-list").append("<li class='navlive' name='S_TypeID' id='S_TypeID"+val.InitialId+"' onclick='bt("+val.InitialId+")'>"+val.InitialName+"</li>");
				}else{
					$(".nav-menu-list").append("<li name='S_TypeID' id='S_TypeID"+val.InitialId+"' onclick='bt("+val.InitialId+")'>"+val.InitialName+"</li>");
				}
			
		});
	}
}		
	//服务类型详情返回
	function bt(num) {
		var JsonData = {"num" : num};
		var url = "/CarService/selectType.action?jsonData="+JSON.stringify(JsonData);
		var rData = visitService(url);
		$("#details").html("");
		if (rData != undefined && rData != "") {
			$("#details").append("<label class='label'>需求类型: </label>");
			$(rData.jsonData).each(function(index, val) {
				$("#details").append("<span class='radio-span'><input name='ServiceTypeID' id='ServiceTypeID_"+val.id+"' type='radio' value='"+val.id+"'/><label for='ServiceTypeID_"+val.id+"'>"+val.ServerTypeName+"</label></span>");
			});
		}
	}
	function changeCarNo(){
		$("#carNo").removeAttr("disabled");
	}
	
	
	//查询车牌号
	 function carinfo(){
		var JsonData = {"id":id};
		var url = "/CarService/selectCarInfo.action?jsonData="+JSON.stringify(JsonData);
		var rData = visitService(url);
		if (rData != undefined && rData != "") {
			$("#carNo").val(rData.carnumber);
		}
	}
	
	
//车型选择
	// 添加车型第二版
function show_flpp(){
	$("#FLPP_ZZ").show();
	$("#FLPP_ZZ_1").show();
	selectqfylist();
}

function delect(){
	selectqfylist();
}

function closeflpp(){
	$("#FLPP_ZZ").hide();
	$("#FLPP_ZZ_1").hide();
}

var OneShow ="";
function selectqfylist(){
	$("#CarOne").html("");
	var fkqgSpUrl="/showGoods/qfylist.action";
	var rData0 = visitService(fkqgSpUrl);
	OneShow = rData0.qfylist;
	for(var i=0; i<OneShow.length;i++){
		$("#CarOne").append('<a class="zm" id="'+OneShow[i].MNEMONICCODE+'" >'+OneShow[i].MNEMONICCODE+'</a>');
	}
	$(".zm").on('click',function(){
        $(".zm").removeClass("zmxuan");
        $(this).addClass("zmxuan");
        var zm = $(this).attr("id");
        cxpp_mc(zm);
	});
	
	var str ="";
	$("#yxz").html('<label class="y">已选择：</label>');
	for(var i=0; i<OneShow.length;i++){
		for(var j=0;j<OneShow[i].PPFL02list.length;j++){
		str+='<div class="logo_list flmain" code="'+OneShow[i].MNEMONICCODE+'">';
		str+='<a><img src="/customer/qfy/images/mycar/'+OneShow[i].PPFL02list[j].BRANDPY+'_'+OneShow[i].PPFL02list[j].BRAND_ID+'.png" />';
		str+='<b class="text" style="line-height:50px;">'+OneShow[i].PPFL02list[j].BRAND+'</b></a></div>';
		}
	}
	$("#cxpp_list").html(str);
	$(".flmain").on('click',function(){
        var cx_mc_1 = $(this).text();
        var code = $(this).attr("code");
        $("#"+code).addClass("zmxuan");
        cxpp_cx_mc_1(cx_mc_1);
	});	
	
}

//查询车型品牌名称及LOGO 
function cxpp_mc(obj){
	$("#yxz").html('<label class="y">已选择：</label>');
	var str=""
	for(var i=0; i<OneShow.length;i++){
		if(OneShow[i].MNEMONICCODE==obj){
			for(var j=0;j<OneShow[i].PPFL02list.length;j++){
			str+='<div class="logo_list flmain" style="width: 125px">';
			str+='<a id="brand"><img src="/customer/qfy/images/mycar/'+OneShow[i].PPFL02list[j].BRANDPY+'_'+OneShow[i].PPFL02list[j].BRAND_ID+'.png" />';
			str+='<b class="text" style="line-height:50px;">'+OneShow[i].PPFL02list[j].BRAND+'</b></a></div>';
			}
			break;
		}
	}
	$("#cxpp_list").html(str);
	$(".flmain").on('click',function(){
        var cx_mc_1 = $(this).text();
        cxpp_cx_mc_1(cx_mc_1);
	});	
}

//查询该车型下所有类型品牌
function cxpp_cx_mc_1(cx_mc_1,type){
	if(type!="1"){
		$("#yxz").append('<div class="yxz_list cx_1"><label>'+cx_mc_1+'&nbsp;&nbsp;</label><a id="cx_1" title="删除" onclick="delect_cx($(this))">×</a></div>');
	}
	var XmlData=[{"sqlid":"com.jlsoft.o2o.product.sql.Oper_SpglDao.cxpp_mc","brand_mc":cx_mc_1,'dataType':'Json'}];
	var url="/jlquery/selecto2o.action?XmlData="+JSON.stringify(XmlData);
	ajaxQ({
			"url" : url,//原始url 
			"callback" : function(returnData){
				var str="";
				 for(var i=0;i<returnData.length;i++){
					 str+='<div class="pp_"><h5>'+returnData[i].car_type+'</h5></div>';
					 var car_name = returnData[i].car_name;
					 var car_list = car_name.split(",");
					 for(var j=0;j<car_list.length;j++){
						 str+='<div class="pp_s car_list"><a>'+car_list[j]+'</a></div>';
					 }
				 }
				$("#cxpp_list").html(str);
				$(".car_list").on('click',function(){
			        var cx_mc_2 = $(this).text();
			        cxpp_cx_mc_2(cx_mc_1,cx_mc_2);
				});
			}
		});
	 
}
//按车型二级分类查询 出厂年份
function cxpp_cx_mc_2(cx_mc_1,cx_mc_2,type){
	if(type!="1"){
		$("#yxz").append('<div class="yxz_list cx_1 cx_2"><label>'+cx_mc_2+'&nbsp;&nbsp;</label><a id="cx_2" tuid="'+cx_mc_1+'" code="'+cx_mc_2+'" title="删除" onclick="delect_cx($(this))">×</a></div>');
	}
	var XmlData=[{"sqlid":"com.jlsoft.o2o.product.sql.Oper_SpglDao.cxpp_mc_year","brand_mc_2":cx_mc_2,'dataType':'Json'}];
	var url="/jlquery/selecto2o.action?XmlData="+JSON.stringify(XmlData);
	 
	 ajaxQ({
			"url" : url,//原始url 
			"callback" : function(returnData){
				var str="";
				 for(var j=0;j<returnData.length;j++){
					 str+='<div class="pp_year car_list"><a>'+returnData[j].mobile_modle_year+'</a></div>';
				 }
				$("#cxpp_list").html(str);
				$(".car_list").on('click',function(){
			        var cx_mc_3 = $(this).text();
			        cxpp_cx_mc_3(cx_mc_2,cx_mc_3);
				});	
			}
		});
	 
}
//按车型年份查询 汽车排量
function cxpp_cx_mc_3(cx_mc_2,cx_mc_3,type){
	 if(type!="1"){
		 $("#yxz").append('<div class="yxz_list cx_1 cx_2 cx_3"><label>'+cx_mc_3+'&nbsp;&nbsp;</label><a id="cx_3" tuid="'+cx_mc_2+'" code="'+cx_mc_3+'" title="删除" onclick="delect_cx($(this))">×</a></div><div id="pl"></div>');
	 }
	 var XmlData=[{"sqlid":"com.jlsoft.o2o.product.sql.Oper_SpglDao.mobile_displacement","brand_mc_2":cx_mc_2,"brand_year":cx_mc_3,'dataType':'Json'}];
	 var url="/jlquery/selecto2o.action?XmlData="+JSON.stringify(XmlData);
	 var returnData=visitService(url);
	 var str="";
	 for(var j=0;j<returnData.length;j++){
		 str+='<div class="displacement car_list"><a>'+returnData[j].mobile_displacement+'</a></div>';
	 }
	
	 var XmlData=[{"sqlid":"com.jlsoft.o2o.product.sql.Oper_SpglDao.mobile_modle","brand_mc_2":cx_mc_2,"brand_year":cx_mc_3,'dataType':'Json'}];
	 var url="/jlquery/selecto2o.action?XmlData="+JSON.stringify(XmlData);
	 var returnData=visitService(url);
	 str+='<div id="modle" style="float:left;border-top:2px solid #eeeeee;height:10px; width:100%;">';
	 for(var j=0;j<returnData.length;j++){
		 str+='<div class="modle_list"><a class="mobile_modle" id="'+returnData[j].mobile_modle_id+'" code="'+returnData[j].mobile_modle_id+'">'+returnData[j].mobile_modle+'</a></div>';
	 }
	 str+='</div>';
	 $("#cxpp_list").html(str);
	 $(".car_list").on('click',function(){
        var mobile_displacement = $(this).text();
        cxpp_cx_mc_4(cx_mc_2,cx_mc_3,mobile_displacement);
	 });
	 $(".mobile_modle").on('click',function(){
        var mobile_modle = $(this).text();
        var chexing_id = $(this).attr("id");
        var mobile_modle_id = $(this).attr("code");
        $("#pp").val(mobile_modle);
        $("#FLPP_ZZ").hide();
        $("#FLPP_ZZ_1").hide();
    	$(".llcx_list_1").on('click',function(){
    		var modle = $(this).text();
            var modle_id = $(this).attr("id");
            var mobile_modle_id = $(this).attr("code");
            $("#pp").val(modle);
            scrollOffset($("#city_name").offset());
    	});
	 });
	 
}
//按车型排量查询 特定车型
function cxpp_cx_mc_4(cx_mc_2,cx_mc_3,mobile_displacement){
	 $("#pl").html('<div class="yxz_list cx_1 cx_2 cx_3 cx_4"><label>'+mobile_displacement+'&nbsp;&nbsp;</label><a tuid="'+cx_mc_2+'" code="'+cx_mc_3+'" class="cx_1 cx_2 cx_3 cx_4" id="cx_4" title="删除" onclick="delect_cx($(this))">×</a></div>');
	 var XmlData=[{"sqlid":"com.jlsoft.o2o.product.sql.Oper_SpglDao.mobile_modle","brand_mc_2":cx_mc_2,"brand_year":cx_mc_3,"mobile_displacement":mobile_displacement,'dataType':'Json'}];
	 var url="/jlquery/selecto2o.action?XmlData="+JSON.stringify(XmlData);
	 
	 ajaxQ({
			"url" : url,//原始url 
			"callback" : function(returnData){
				 var str="";
				 for(var j=0;j<returnData.length;j++){
					 str+='<div class="modle_list"><a class="mobile_modle" id="'+returnData[j].mobile_modle_id+'" code="'+returnData[j].mobile_modle_id+'">'+returnData[j].mobile_modle+'</a></div>';
				 }
				
				 $("#modle").html(str);
				 $(".mobile_modle").on('click',function(){
			        var mobile_modle = $(this).text();
			        var chexing_id = $(this).attr("id");
			        var mobile_modle_id = $(this).attr("code");
			        $("#pp").val(mobile_modle);
			        $("#FLPP_ZZ").hide();
			        $("#FLPP_ZZ_1").hide();
			    	$(".llcx_list_2").on('click',function(){
			    		var modle = $(this).text();
			            var modle_id = $(this).attr("id");
			            var mobile_modle_id = $(this).attr("code");
			            $("#pp").val(modle);
			            scrollOffset($("#city_name").offset());
			    	});
				});
			}
		});
}
//删除已选车型,刷新当前数据
function delect_cx(obj){
	var cx_id = obj.attr("id");
	$("."+cx_id).remove();
	if(cx_id=="cx_1"){
		selectqfylist();
	}else if(cx_id=="cx_2"){
		var cx_mc_1 = obj.attr("tuid");
		cxpp_cx_mc_1(cx_mc_1,"1");
	}else if(cx_id=="cx_3"){
		var cx_mc_1 = obj.attr("code");
		var cx_mc_2 = obj.attr("tuid");
		cxpp_cx_mc_2(cx_mc_1,cx_mc_2,"1");
	}else if(cx_id=="cx_4"){
		var cx_mc_2 = obj.attr("tuid");
		var cx_mc_3 = obj.attr("code");
		cxpp_cx_mc_3(cx_mc_2,cx_mc_3,"1");
	}
}
	</script>
</body>
</html>